# Ch3. HTTP 정보는 HTTP 메시지에 있다

## 3.1 HTTP 메시지 구조

1. 메시지 헤더
2. 개행문자(CR+LF)
3. 메시지 바디

> 개행문자: 메시지 헤더/바디를 구분한다.
> 
> - CR: carriage return. 16진수.
> - LF: line feed. 16진수.

## 3.2 Request, Response 

### Request 메시지 구조

- 메시지 헤더
	- **리퀘스트 라인**: HTTP Method, URI, HTTP 버전
	- **리퀘스트 헤더필드**
	- 일반 헤더필드
	- 엔티티 헤더필드
- 개행문자
- 메시지 바디 	


### Response 메시지 구조

- 메시지 헤더
	- **상태 라인**: 상태코드+설명, HTTP 버전
	- **리스폰스 헤더필드**
	- 일반 헤더필드
	- 엔티티 헤더필드
- 개행문자
- 메시지 바디 	

## 3.3 인코딩

전송시 인코딩을 하면 

- (장) 전송효율을 높일 수 있다.
- (단) 컴퓨터에서 인코딩 처리해야하기 때문에, CPU등의 리소스는 더 많이 먹는다.

### 메시지, 엔티티 차이점

메시지

- HTTP 통신의 기본 단위.
- 8비트로 구성.
- 통신을 통해 전송된다.

엔티티

- Request, Response의 페이로드(Payload)로 전송되는 정보.
- `엔티티 헤더필드 + 엔티티 바디`로 구성된다.

메시지 바디는 Request, Response에 대한 엔티티 바디를 운반하는 역할을 한다. 기본적으로 메시지 바디와 엔티티 바디는 같지만, 전송 코딩이 적용된 경우 엔티티 바디의 내용이 변화하기 때문에 메시지 바디와 달라진다.

### 압축해서 보내는: 콘텐츠 코딩

- 콘텐츠 코딩은 엔티티에 적용하는 인코딩을 가리킨다.
- 엔티티 정보를 유지한 채로 압축한다.
- 수신한 클라이언트 측에서 디코딩한다.
- 콘텐츠코딩의 예: gzip, compress

### 분해해서 보내는: 청크 전송 코딩

- 청크 전송 코딩은 엔티티 바디를 청크로 분해해서 전송한다.
- 사이즈가 큰 데이터를 전송하는 경우, 데이터를 분할해서 조금씩 표시할 수 있다.
- 수신한 클라이언트 측에서 원래의 엔티티 바디로 디코딩한다.

## 3.4 Multipart

"여러 데이터를 보낸다."

- MIME(Multipurpose Internet Mail Extentions)
- MIME은 이미지 등의 바이너리 데이터를 아스키 문자열에 인코딩하는 방법과 데이터 종류를 나타내는 방법 등을 규정하고있다.
- 하나의 메시지 바디에 엔티티를 여러개 포함시켜 보낼 수 있다. 주로 이미지, 텍스트파일 등을 업로드할 때 사용된다.

```
Content-type: multipart/form-data
```

- web form으로 부터 파일 업로드시 사용된다.

```
Content-type: multipart/byteranges
```

- 206(Partial Content) Response 메시지가 복수 내용을 포함할 때 사용된다.

