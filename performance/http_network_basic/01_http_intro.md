
## Ch1. 네트워크의 기본은 TCP/IP

일반적으로 사용하고있는 네트워크는 TCP/IP를 기반으로 움직이고있다. HTTP도 그 중 하나다.

TCP/IP는 4Layer로 나뉘어있다.

- 어플리케이션 계층: FTP, DNS, HTTP
- 트랜스포트 계층: TCP, UDP
- 네트워크 계층
- 링크 계층

계층화 장점

- 어느 한 계층이 변경되었을 때, 그 계층만 바꾸면 된다. 위아래 인터페이스를 유지하기만 하면 각 계층의 내부는 자유롭게 설계할 수 있다.

## Ch2. HTTP

HTTP는 상태를 계속 유지하지 않는 스테이트리스(stateless)프로토콜이다.

- 이전에 보냈던 리퀘스트나 이미 되돌려준 리스폰스에 대해서 전혀 기억하지 않는다.
- 새로운 리퀘스트를 보낼 때마다 새로운 리스폰스가 생성된다.

웹기술이 발전하면서, 상태를 저장해야하는 일이 생겼다.(예: 쇼핑몰 로그인)

- 그래서 쿠키가 생겨났다.
- 쿠키덕분에 HTTP 통신에서도 상태를 계속 관리할 수 있다.

### HTTP Method

- GET
- POST
- PUT
- HEAD
  - 메시지 헤더 취득. 
  - GET이랑 같은 기능이지만 Body는 돌려주지 않는다.
  - URI 유효성/리소스 갱신시간을 확인하는 목적으로 사용된다.
- DELETE
- 그 외: OPTIONS, TRACE, CONNECT

### 지속연결(Persistent Connections)

예전에는 HTTP 통신을 한번 할때마다 매번 TCP를 연결/종료했다.

초기에 HTML에 텍스트만 넣었을 때는 괜찮았는데, 점점 HTML에 여러 이미지가 들어가는 경우 

- 이미지를 얻기 위해서도 리퀘스트를 보내는데
- 이 때마다 매번 TCP를 연결/종료해야했다.
- 쓸데없이 통신량이 늘어난다.

그래서 TCP 연결문제를 해결하기 위해 "지속연결" 방법이 고안되었다.

- 어느 한쪽이 명시적으로 연결을 종료하지 않는 이상 TPC연결을 계속 유지한다.

이렇게 했더니

- TCP 연결/종료 반복하는 오버헤드를 줄여줘서
- 서버에 대한 부하가 줄었다.

### 파이프라인화

지속연결은 파이프라인화(HTTP pipelining)를 가능하게했다.

이전에는 request 송신 후 response를 수신할때까지 기다렸다가 그다음 request를 보냈는데, 이제는 response를 기다리지 않고 바로 다음 request를 보낼 수 있다.

### 쿠키

HTTP는 stateless 프로토콜이기 때문에, 과거에 주고/받았던 리퀘스트/리스폰스 상태를 모른다.
(예: 로그인의 경우, 쿠키가 없었다면 페이지를 이동할때마다 다시 로그인해야했을거다!)

쿠키는 클라이언트의 상태를 파악하기 위한 시스템이다.

1. (아직 쿠키가 없을 때) 클라이언트: 리퀘스트 송신
2. 서버: 리스폰스에 쿠키를 붙여서 송신 (서버가 쿠키를 발행)
3. 클라이언트: 아까 그 서버에 요청을 보낼 때 아까 받은 쿠키를 붙여서 송신 (보관하고 있던 쿠키를 자동 송신)
